<!DOCTYPE html>
<html>
<head>
  <style>
    body {
      background-color: red;
    }
  </style>
</head>
<body>
  <button onclick="requestMotionPermission()">Zugriff auf Bewegungssensoren anfordern</button>
  
  <script>
    var shakeTimeout; // Timeout-Variable
    
    // Funktion zur Überprüfung, ob das Gerät geschüttelt wird
    function onDeviceMotion(event) {
      var acceleration = event.accelerationIncludingGravity;
      var shakeThreshold = 15; // Schwellenwert für die Erschütterung (experimentell anpassen)
      
      // Berechnung der Beschleunigung in x-, y- und z-Richtung
      var accelerationX = acceleration.x;
      var accelerationY = acceleration.y;
      var accelerationZ = acceleration.z;
      
      // Berechnung der Gesamtbeschleunigung
      var totalAcceleration = Math.sqrt(Math.pow(accelerationX, 2) + Math.pow(accelerationY, 2) + Math.pow(accelerationZ, 2));
      
      // Überprüfung, ob das Gerät geschüttelt wird
      if (totalAcceleration > shakeThreshold) {
        clearTimeout(shakeTimeout); // Vorheriges Timeout löschen
        document.body.style.backgroundColor = "green"; // Hintergrund grün setzen
        
        // Timeout setzen, um den Hintergrund nach 1 Sekunde wieder auf rot zu setzen
        shakeTimeout = setTimeout(function() {
          document.body.style.backgroundColor = "red"; // Hintergrund rot setzen
        }, 1000);
      }
    }
    
    // Funktion zum Anfordern des Zugriffs auf die Bewegungssensoren
    function requestMotionPermission() {
      if (typeof DeviceMotionEvent.requestPermission === 'function') {
        DeviceMotionEvent.requestPermission()
          .then(permissionState => {
            if (permissionState === 'granted') {
              window.addEventListener('devicemotion', onDeviceMotion);
            }
          })
          .catch(console.error);
      } else {
        alert("Bewegungssensoren werden nicht unterstützt.");
      }
    }
  </script>
</body>
</html>
